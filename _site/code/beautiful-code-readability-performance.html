<?xml version='1.0' encoding='utf-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
  <head>
    <meta content='GROW UP' http-equiv='X-UA-Compatible' />
    <meta content='width=850' name='viewport' />
    <title>The Knowldenist - Drink Up! - Readability and Performance is Beautiful Code</title>
    <link href='/images/gusgus_icon.gif' rel='icon' />
    <link href="http://feeds.feedburner.com/gusgus" rel="alternate" title="The Knowldenist" type="application/atom+xml" />
    <link href='http://gusg.us/feed.xml' rel='alternate' title='The Knowldenist' type='application/atom+xml' />
    <link href="/stylesheets/reset.css" type="text/css" media="screen" rel="stylesheet"/>
    <link href="/stylesheets/960.css" type="text/css" media="screen" rel="stylesheet"/>
    <link href="/stylesheets/text.css" type="text/css" media="screen" rel="stylesheet"/>
    <link href="/stylesheets/application.css" type="text/css" media="screen" rel="stylesheet"/>
    <link href="/stylesheets/pygment-native.css" type="text/css" media="screen" rel="stylesheet"/>
  </head>

  <body>
    <div class='container_12'>
      <div id='header' class='grid_12 alpha omega'>
        <div id="title" class="grid_6 alpha">
          <span class="article">The</span><span class="noun"><a href="/">Knowldenist</a></span>
        </div>
        <div id="nav" class="grid_6 omega">
          <ul>
            <li><a href='/'>Read</a></li>
            <li>
              Code
              <ul>
                <li><a href="http://github.com/jaknowlden">jaknowlden</a></li>
                <li><a href="http://github.com/thumblemonks">thumblemonks</a></li>
              </ul>
            </li>
            <li>
              Links
              <ul>
                <li><a href="http://tumblr.gusg.us/">Tumblr</a></li>
                <li><a href="http://twitter.com/jaknowlden">Twittr</a></li>
                <li><a href="http://flickr.com/jaknowlden">Flickr</a></li>
              </ul>
            </li>
          </ul>
        </div>
      </div>

      <div id="main" class='grid_12 alpha omega'>
        <div id="page_title">
  <h1>Readability and Performance is Beautiful Code</h1>
  <div class="summary"><em>Thoughts on what makes code beautiful</em></div>
</div>

<div class="grid_9 alpha">
  <div id="left" class="grid_3 alpha column">
    <ul>
      <h3>Into the Future</h3>
      <li>
        <a href="/life/only-losers-are-unc-fans.html">Only Losers are UNC Fans - With Tests</a>
        <p><em>It's not JUST a game, man!</em></p>
      </li>

      <li>
        <a href="/code/ruby/multiplexing-delegator.html">Multiplexing Delegator</a>
        <p><em>One person's brainfart is another person's gas-powered wind balloon</em></p>
      </li>
    </ul>
  </div>

  <div id="article" class="grid_6 omega">
    <div id="info">
      <div class="date"><cite>Jan 21, 2008</cite></div>
    </div>

    <div class="content"><p>Had a <em>nice</em> email discussion amongst the <a href='http://techni.cal.ly'>Centronians</a> the other day about what beautiful code is. The discussion came about due to a challenge I put out to the team to improve a certain nested conditional branch in the <a href='http://identity-matcher.googlecode.com/svn/trunk/lib/identity_matcher.rb'>Identity Matcher</a> method, <code>match_foaf</code>.</p>

<p>Seems as though there are some strong opinions from some that readability of code is secondary to the performance of code. I figured I would some up my thoughts and did so in the following matrix:</p>
<img src='/images/articles/code/code-perf-read.png' />
<p>To be clear, this is the code in question:</p>
<div class='highlight'><pre><code class='ruby'><span class='k'>if</span> <span class='n'>foaf</span><span class='o'>.</span><span class='n'>has_key?</span> <span class='s1'>&#39;&lt;&gt;&#39;</span>
  <span class='n'>knows</span> <span class='o'>=</span> <span class='n'>foaf</span><span class='o'>[</span><span class='s1'>&#39;&lt;&gt;&#39;</span><span class='o'>][</span><span class='s2'>&quot;&lt;http://xmlns.com/foaf/0.1/knows&gt;&quot;</span><span class='o'>]</span>
  <span class='k'>if</span> <span class='o'>!</span><span class='n'>knows</span><span class='o'>.</span><span class='n'>nil?</span>
    <span class='n'>knows</span><span class='o'>.</span><span class='n'>each</span> <span class='k'>do</span> <span class='o'>|</span><span class='n'>know</span><span class='o'>|</span>
      <span class='k'>if</span> <span class='n'>foaf</span><span class='o'>.</span><span class='n'>has_key?</span> <span class='n'>know</span>
        <span class='n'>person_id</span> <span class='o'>=</span> <span class='n'>foaf</span><span class='o'>[</span><span class='n'>know</span><span class='o'>][</span><span class='s2'>&quot;&lt;http://xmlns.com/foaf/0.1/Person&gt;&quot;</span><span class='o'>]</span>
        <span class='k'>if</span> <span class='o'>!</span><span class='n'>person_id</span><span class='o'>.</span><span class='n'>nil?</span> <span class='ow'>and</span> <span class='n'>person_id</span><span class='o'>.</span><span class='n'>size</span> <span class='o'>&gt;</span> <span class='mi'>0</span>
          <span class='n'>person</span> <span class='o'>=</span> <span class='n'>foaf</span><span class='o'>[</span><span class='n'>person_id</span><span class='o'>[</span><span class='mi'>0</span><span class='o'>]]</span>
          <span class='k'>if</span> <span class='o'>!</span><span class='n'>person</span><span class='o'>[</span><span class='s1'>&#39;&lt;http://xmlns.com/foaf/0.1/nick&gt;&#39;</span><span class='o'>].</span><span class='n'>nil?</span> <span class='ow'>and</span> <span class='n'>person</span><span class='o'>[</span><span class='s1'>&#39;&lt;http://xmlns.com/foaf/0.1/nick&gt;&#39;</span><span class='o'>].</span><span class='n'>size</span> <span class='o'>&gt;</span> <span class='mi'>0</span>
            <span class='n'>nicks</span> <span class='o'>&lt;&lt;</span> <span class='n'>person</span><span class='o'>[</span><span class='s1'>&#39;&lt;http://xmlns.com/foaf/0.1/nick&gt;&#39;</span><span class='o'>][</span><span class='mi'>0</span><span class='o'>]</span>
          <span class='k'>end</span>
          <span class='k'>if</span> <span class='o'>!</span><span class='n'>person</span><span class='o'>[</span><span class='s1'>&#39;&lt;http://xmlns.com/foaf/0.1/member_name&gt;&#39;</span><span class='o'>].</span><span class='n'>nil?</span> <span class='ow'>and</span> <span class='n'>person</span><span class='o'>[</span><span class='s1'>&#39;&lt;http://xmlns.com/foaf/0.1/member_name&gt;&#39;</span><span class='o'>].</span><span class='n'>size</span> <span class='o'>&gt;</span> <span class='mi'>0</span>
            <span class='n'>names</span> <span class='o'>&lt;&lt;</span> <span class='n'>person</span><span class='o'>[</span><span class='s1'>&#39;&lt;http://xmlns.com/foaf/0.1/member_name&gt;&#39;</span><span class='o'>][</span><span class='mi'>0</span><span class='o'>]</span>
          <span class='k'>end</span>
        <span class='k'>end</span>
      <span class='k'>end</span>
    <span class='k'>end</span>
  <span class='k'>end</span>
<span class='k'>end</span>
</code></pre>
</div>
<p>Keep an eye on <a href='http://slickorslack.com'>Slick or Slack</a> for this little piece of code I threw up <a href='http://slickorslack.com/codes/100'>there</a>. If my assumption is right, it will be one of the slackest of all.</p>

<h2 id='update'>Update</h2>

<ol>
<li>Slick or Slack no longer exists :(</li>
</ol></div>
  </div>

  <div id="grumble">
    <h4 class="count"></h4>
    <ul></ul>

    <div id="disqus_thread"></div>
    <script type="text/javascript" src="http://disqus.com/forums/gusgus/embed.js"></script>
    <noscript><a href="http://disqus.com/forums/gusgus/?url=ref">View the discussion thread.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">powered by <span class="logo-disqus">Disqus</span></a>
  </div>
</div>

<div id="right" class="grid_3 omega column">
  <ul>
    <h3>Into the Past</h3>
    <li>
      <a href="/life/active-record-modeling-life.html">Active Record Modeling Life</a>
      <p><em>Code and Life intertwined ... ewwwwww</em></p>
    </li>

    <li>
      <a href="/code/ruby/flashback.html">Flashback</a>
      <p><em>Test your flash and I mean .now</em></p>
    </li>
  </ul>
</div>

      </div>

      <div class='grid_12 alpha omega' id='footer'>
        <a href="http://feeds2.feedburner.com/gusgus" rel="alternate" type="application/rss+xml">
          <img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a>
        &copy; 2007 -  Justin Knowlden /
        <span id="other_thumble_monks">
          Other Thumble Monks:
          <a href="http://annealer.org/">Annealer</a>,
          <a href="http://github.com/danhodos">Sandman</a>,
          <a href="http://toothrot.net/">Toothrot</a>,
          <a href="http://hjstudios.com/">JankStar</a>,
          <a href="http://andrijevik.net/">Vladka</a>
        </span>
      </div>
    </div>

    <script src="/javascripts/jquery-1.3.2.min.js"></script>
    <script src="/javascripts/disqus.js"></script>
    <script src="/javascripts/application.js"></script>
    <script src="/javascripts/ga.js"></script>
  </body>
</html>