<?xml version='1.0' encoding='utf-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
  <head>
    <meta content='GROW UP' http-equiv='X-UA-Compatible' />
    <meta content='width=850' name='viewport' />
    <title>
      GusG.us
      Riding The Long Bus
    </title>
    <link href='/images/gusgus_icon.gif' rel='icon' />
    <link href='http://gusg.us/feed.xml' rel='alternate' title='GusG.us' type='application/rss+xml' />
    <link href="/stylesheets/reset-min.css" type="text/css" media="screen" rel="stylesheet"/>
    <link href="/stylesheets/application.css" type="text/css" media="screen" rel="stylesheet"/>
    <link href="/stylesheets/pygment-native.css" type="text/css" media="screen" rel="stylesheet"/>
  </head>

  <body>
    <div class='container'>
      <div id='header'>
        <a href='http://gusg.us'>
          <img src='/images/gus-logo.png' />
        </a>
        <span class='nav'>
          <a href='/'>Home</a>
          <a href='/life'>Life</a>
          <a href='/work'>Work</a>
          <a href='/code'>Code</a>
          <a href='/code/ruby'>Ruby</a>
          <a href='/code/erlang'>Erlang</a>
        </span>
        <a href='http://feeds.feedburner.com/gusgus' rel='alternate' type='application/rss+xml'>
          <img src='http://www.feedburner.com/fb/images/pub/feed-icon16x16.png' />
        </a>
      </div>

      <div id="article">
  <h1>Canonical</h1>
  <em>Rails ActionMailer extension for substituting inline email addresses</em>
  <cite>Sat Nov 08 00:00:00 -0600 2008</cite>
  <p>I and a co-worker (Eric Schwartz) wrote <a href='http://github.com/centro/canonical/tree/master'>Canonical</a> for <a href='http://centro.net'>Centro</a> - my current employer. Canonical does for your Rails app what Postfix&#8217;s <a href='http://www.postfix.org/canonical.5.html'>canonical</a> would do for your sys-admin. But now, you have the control! Ha ha!</p>

<p>Check out the README for everything you need to know.</p>
<hr />
<p>Alright fine, Canonical is an ActionMailer extension that acts just like the Postfix utility of the same name. Essentially, Canonical lets you substitute the To, CC, and/or BCC email destinations with one of many replacements via a rule. It can be great for your integration and testing environments to direct all mail so that it is sent to a QA email address or something.</p>

<p>You may add a canonical rule like the following to send any email from the system to any address to the QA email distribution list:</p>

<pre><code>TMail::Mail.add_canonical_override(/.*/, &#39;qa@foo.bar&#39;)</code></pre>

<p>Assuming you are working at Foo Bar, that rule will match any destination address that has any character in it - meaning, it matches everything - and will substitute the matched email with qa@foo.bar. This is the same as saying the following in Postfixâ€™s canonical file:</p>

<pre><code>/.*/, qa@foo.bar</code></pre>

<p>What you should notice is that canonical expects to see a regular expression as the first argument. Passing in anything that does not respond to =~ will result in an error.</p>

<p>Have fun!</p>
</div>
 
<div id="related">
  <h3>Related Posts</h3>
  <ul class="posts">
    
      <li><span>05 Jan 2009</span> &raquo; <a href="/life/thumbly-going-on.html">Thumbly Going On</a></li>
    
      <li><span>03 Jan 2009</span> &raquo; <a href="/code/ruby/load-model.html">Load Model</a></li>
    
      <li><span>20 Dec 2008</span> &raquo; <a href="/life/boring-bed-poem.html">Poem - Boring Bed</a></li>
    
  </ul>
</div>


    </div>
    <div class='container'>
      <div class='clear' id='footer'>
        &copy; 2007 - 2009 Justin Knowlden,
        <span class='email'>gus at gusg dot us</span>
        <span class='powered'>
          - Powered by <a href=''>Jekyll</a>,
          <a href=''>Markdown</a>,
          <a href='http://rubyforge.org/projects/syntaxi/'>Syntaxi</a>, and me
        </span>
      </div>
    </div>
    <a href='http://github.com/jaknowlden'>
      <img alt='Fork me on GitHub' id='ribbon' src='http://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png' />
    </a>
    <script src="http://ajax.googleapis.com/ajax/libs/prototype/1.6.0.3/prototype.js" type="text/javascript"></script>
    <script src="/javascripts/jquery-1.2.6.min.js" type="text/javascript"></script>
    <script src="http://grumble.annealer.org/javascripts/grumbler/api.js" type="text/javascript"></script>
    <script src="/javascripts/grumble_support.js" type="text/javascript"></script>
  </body>
</html>